{% extends 'classic/index.html.j2' %}

{% block head %}
    {{ super() }}  {# Ensure other head content from the classic template is included #}
{% endblock head %}

{% block body %}
<h1 style="text-align:center; color:#6a0dad;">{{ resources.metadata.name.replace('_', ' ').title() }}</h1>

{{ super() }}  {# This includes the default content from the classic template #}

<script type="text/javascript">
    window.onload = function() {
        document.title = "{{ resources.metadata.name.replace('_', ' ').title() }}";
    };

    document.addEventListener("DOMContentLoaded", function () {
        // Get the dataset name from the Jinja variable
        const notebookName = "{{ resources.metadata.name }}";

        // Fetch project_info.json
        fetch("../project_info.json")  // Update this path
            .then(response => response.json())
            .then(data => {
                // Get dataset details for the notebook
                const datasetInfo = data[notebookName] || {
                    description: "No description available.",
                    dataset_source: "N/A"
                };

                // Update the page content
                document.getElementById("dataset-source").innerHTML = 
                    `<a href="${datasetInfo.dataset_source}" target="_blank">${datasetInfo.dataset_source}</a>`;
                document.getElementById("dataset-description").textContent = datasetInfo.description;
            })
            .catch(error => {
                console.error("Error loading project_info.json:", error);
            });

        // Update document title
        document.title = notebookName.replace(/_/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
    });
</script>
{% endblock body %}
