{% extends 'classic/index.html.j2' %}

{% block head %}
    {{ super() }}  {# Ensure other head content from the classic template is included #}

    <style>
        /* Remove unnecessary margins and padding */
        body, .container {
            margin: 0 !important;
            padding: 0 !important;
            width: 100% !important;
        }

        /* Ensure graphs and output cells use full width */
        .output_png, .output_svg, .output_html {
            max-width: 100% !important;
            width: 100% !important;
            display: block;
        }

        /* Remove extra margins inside Jupyter cells */
        div.output_area {
            margin: 0 !important;
            padding: 0 !important;
        }
    </style>
{% endblock head %}

{% block body %}
<h1 style="text-align:center; color:#6a0dad;">{{ resources.metadata.name.replace('_', ' ').title() }} - Jupyter Notebook</h1>

{# Load metadata.json #}
{% set metadata_path = "/Users/noahking/data_analysis/metadata.json" %}
{% set metadata = {} %}

{% if metadata_path|file_exists %}
    {% set metadata = metadata_path|load_json %}
{% endif %}

{% set project_key = resources.metadata.name.lower() %}

{% if project_key in metadata %}
    <p style="text-align:center;"><strong>Description:</strong> {{ metadata[project_key]['description'] }}</p>
    <p style="text-align:center;"><strong>Dataset Source:</strong> 
        <a href="{{ metadata[project_key]['dataset_source'] }}" target="_blank">
            {{ metadata[project_key]['dataset_source'] }}
        </a>
    </p>
{% else %}
    <p style="text-align:center;"><strong>No metadata available for this project.</strong></p>
{% endif %}

{{ super() }}  {# This includes the default content from the classic template #}

<script type="text/javascript">
    window.onload = function() {
        document.title = "{{ resources.metadata.name.replace('_', ' ').title() }}";
    };
</script>
{% endblock body %}
